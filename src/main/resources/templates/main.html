<!DOCTYPE html>
<html lang="en">
    <head>
        <th:block th:include="/common/head"></th:block>
    </head>
    <body>
        <th:block th:include="/layout/header"></th:block>
        <div class="main">
            <div class="main-section">
                <div class="main-image"></div>
                <div class="main-scroll">Scroll Down</div>
                <div class="scroll-line-top"></div>
            </div>
            <div class="main-section">
                <div class="content">
                    <div class="content-title">MINPOOH Factory</div>
                    <div class="content-desc">
                        누구나 받는 선물 말고 어떤게 있을까? 그 고민은 민푸팩토리가 대신 해드릴게요.
                    </div>
                    <div class="content-desc">
                        여러분은 세상에 하나뿐인 선물을 선물할 기쁜 마음만 준비해주세요~!
                    </div>
                </div>
                <div class="scroll-line-bottom"></div>
            </div>
            <div class="main-section">
                <div class="main-section-title">Items</div>
            </div>
        </div>
        <th:block th:include="/layout/footer"></th:block>
        <th:block th:include="/common/script"></th:block>
        <script>
            $(window).scroll(function(){

                // about 섹션에 효과를 넣기 위한 스크립트
                var scroll = $(window).scrollTop();
                var aboutLineHeight = $(".scroll-line-bottom").height();
                if(scroll > 600){
                    $(".scroll-line-bottom").css({"height":"300px"});
                } else {
                    $(".scroll-line-bottom").css({"height":"0px"});
                }
                if(aboutLineHeight == 300){
                    $(".content").fadeIn(800);
                } else {
                    $(".content").fadeOut(800);
                }

            });

            // 스크롤을 천천히 하기 위한 스크립트
            class Scrooth {
                            constructor({element = window, strength=10, acceleration = 1.2, deceleration = 0.975}={}) {
                                this.element = element;
                                this.distance = strength;
                                this.acceleration = acceleration;
                                this.deceleration = deceleration;
                                this.running = false;

                                this.element.addEventListener('wheel', this.scrollHandler.bind(this), {passive: false});
                                this.element.addEventListener('mousewheel', this.scrollHandler.bind(this), {passive: false});
                                this.scroll = this.scroll.bind(this);
                            }

                            scrollHandler(e) {
                                e.preventDefault();

                                if (!this.running) {
                                this.top = this.element.pageYOffset || this.element.scrollTop || 0;
                                this.running = true;
                                this.currentDistance = e.deltaY > 0 ? 0.1 : -0.1;
                                this.isDistanceAsc = true;
                                this.scroll();
                                } else {
                                this.isDistanceAsc = false;
                                this.currentDistance = e.deltaY > 0 ? this.distance : -this.distance;
                                }
                            }

                            scroll() {
                                if (this.running) {
                                this.currentDistance *= this.isDistanceAsc === true ? this.acceleration : this.deceleration;
                                Math.abs(this.currentDistance) < 0.1 && this.isDistanceAsc === false ? this.running = false : 1;
                                Math.abs(this.currentDistance) >= Math.abs(this.distance) ? this.isDistanceAsc = false : 1;

                                this.top += this.currentDistance;
                                this.element.scrollTo(0, this.top);
                                
                                requestAnimationFrame(this.scroll);
                                }
                            }
            }

            const scroll = new Scrooth({
                element: window,
                strength: 5,
                acceleration: 1.75,
                deceleration: .875,
            });
        </script>
    </body>
</html>